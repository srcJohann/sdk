# ============================================================================
# DOM360 - Configuração de Produção (VPS)
# ============================================================================
# Este é um exemplo de .env para deploy em VPS com IPv4 público
# Copie este arquivo para .env e ajuste os valores conforme sua infraestrutura
# ============================================================================

# ============================================================================
# PostgreSQL Database
# ============================================================================
DB_HOST=127.0.0.1
DB_PORT=5432
DB_NAME=dom360_db_sdk
DB_USER=dom360_user
# ⚠️ IMPORTANTE: Altere para uma senha forte e use quotes!
DB_PASSWORD="SUA_SENHA_FORTE_AQUI"

# ============================================================================
# Backend API (FastAPI)
# ============================================================================
BACKEND_PORT=3001
AGENT_API_URL=http://localhost:8000

# Back-end binding and public URL
BACKEND_BIND_HOST=0.0.0.0
BACKEND_BIND_PORT=3001
INTERNAL_BACKEND_HOST=127.0.0.1
INTERNAL_BACKEND_PORT=3001

# ⚠️ CRÍTICO: Configure com seu domínio ou IP público da VPS
# Exemplos:
#   Com domínio: http://api.seudominio.com
#   Sem domínio: http://203.0.113.10 (seu IP público)
PUBLIC_BACKEND_URL=http://api.seudominio.com
PUBLIC_BACKEND_HOST=api.seudominio.com

# ============================================================================
# Frontend (React + Vite)
# ============================================================================
# ⚠️ CRÍTICO: Esta URL será incluída no build do frontend!
# NUNCA use 127.0.0.1 ou localhost em produção!
# 
# Desenvolvimento local:    http://127.0.0.1:3001
# Produção com domínio:     http://api.seudominio.com
# Produção sem domínio:     http://203.0.113.10:3001
VITE_API_URL=http://api.seudominio.com

# Tenant e Inbox IDs (usar quotes para UUID)
VITE_TENANT_ID="00000000-0000-0000-0000-000000000001"
VITE_INBOX_ID="00000000-0000-0000-0001-000000000001"

# Dados de teste do usuário
VITE_USER_PHONE="+5511999998888"
VITE_USER_NAME="Usuário Teste"

# Front-end binding and public URL
FRONTEND_BIND_HOST=0.0.0.0
FRONTEND_BIND_PORT=5173
INTERNAL_FRONTEND_HOST=127.0.0.1
INTERNAL_FRONTEND_PORT=5173

# ⚠️ CRÍTICO: Configure com seu domínio ou IP público da VPS
PUBLIC_FRONTEND_URL=http://seudominio.com
PUBLIC_FRONTEND_HOST=seudominio.com

# ============================================================================
# Security
# ============================================================================
# ⚠️ CRÍTICO: Gere um secret forte e NUNCA compartilhe!
# Para gerar: openssl rand -base64 32
JWT_SECRET="GERE_UM_SECRET_FORTE_AQUI"

# Opcional: Chave de criptografia para dados sensíveis
# ENCRYPTION_KEY="GERE_OUTRA_CHAVE_AQUI"

# ============================================================================
# CORS (Cross-Origin Resource Sharing)
# ============================================================================
# Lista de origens permitidas (separadas por vírgula)
# Em produção, especifique apenas os domínios necessários
CORS_ORIGINS=http://seudominio.com,https://seudominio.com,http://api.seudominio.com,https://api.seudominio.com

# ============================================================================
# Environment
# ============================================================================
NODE_ENV=production
PYTHON_ENV=production

# ============================================================================
# INSTRUÇÕES DE DEPLOY
# ============================================================================
#
# 1. Copie este arquivo para .env:
#    cp .env.production .env
#
# 2. Edite .env e altere TODOS os valores marcados com ⚠️ CRÍTICO
#
# 3. Gere secrets seguros:
#    openssl rand -base64 32
#
# 4. Configure DNS (se usar domínio):
#    seudominio.com     A    203.0.113.10
#    api.seudominio.com A    203.0.113.10
#
# 5. Execute o script de deploy:
#    sudo bash deploy_vps.sh
#
# 6. Após deploy, configure SSL:
#    sudo certbot --nginx -d seudominio.com -d api.seudominio.com
#
# ============================================================================
# CHECKLIST PRÉ-DEPLOY
# ============================================================================
#
# [ ] DB_PASSWORD alterado para senha forte
# [ ] JWT_SECRET gerado com openssl rand -base64 32
# [ ] VITE_API_URL aponta para domínio/IP público (NÃO localhost!)
# [ ] PUBLIC_BACKEND_HOST configurado corretamente
# [ ] PUBLIC_FRONTEND_HOST configurado corretamente
# [ ] DNS configurado (se usar domínio)
# [ ] Firewall permite portas 80, 443, 22
# [ ] PostgreSQL instalado e rodando
# [ ] Nginx instalado
#
# ============================================================================
